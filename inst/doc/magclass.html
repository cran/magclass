<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Jan Philipp Dietrich" />

<meta name="date" content="2019-12-13" />

<title>MAGPIE Class Tutorial</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">MAGPIE Class Tutorial</h1>
<h4 class="author">Jan Philipp Dietrich</h4>
<h4 class="date">2019-12-13</h4>



<p>This tutorial provides a basic introduction to magpie objects in R. If you would like to get more details on the concept of and the idea behind magpie objects you can have a look at <a href="magclass-concept.html">magclass-concept</a>, where this is explained in more detail by comparing the magpie class to other data classes in R.</p>
<div id="generate-a-magpie-object" class="section level2">
<h2>Generate a magpie object</h2>
<p>Generation of magpie objects can either be done from scratch, by reading in files or by converting objects from other classes to magpie objects. For creation of a new magpie object you can use <code>new.magpie</code>, conversion of an existing object happens with <code>as.magpie</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magclass)

<span class="co"># creating a magpie object with 2 regions, 2 years and 2 different values</span>
m &lt;-<span class="st"> </span><span class="kw">new.magpie</span>(<span class="dt">cells_and_regions=</span><span class="kw">c</span>(<span class="st">&quot;AFR&quot;</span>,<span class="st">&quot;CPA&quot;</span>),
                <span class="dt">years=</span><span class="kw">c</span>(<span class="dv">1995</span>,<span class="dv">2000</span>),
                <span class="dt">names=</span><span class="kw">c</span>(<span class="st">&quot;bla&quot;</span>,<span class="st">&quot;blub&quot;</span>),
                <span class="dt">sets=</span><span class="kw">c</span>(<span class="st">&quot;region&quot;</span>,<span class="st">&quot;year&quot;</span>,<span class="st">&quot;value&quot;</span>),
                <span class="dt">fill=</span><span class="dv">0</span>)
<span class="kw">print</span>(m)
<span class="co">#&gt; , , value = bla</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       year</span>
<span class="co">#&gt; region y1995 y2000</span>
<span class="co">#&gt;    AFR     0     0</span>
<span class="co">#&gt;    CPA     0     0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , value = blub</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       year</span>
<span class="co">#&gt; region y1995 y2000</span>
<span class="co">#&gt;    AFR     0     0</span>
<span class="co">#&gt;    CPA     0     0</span>

<span class="co"># converting a simple vector with one value per region to a magpie object</span>
v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ENG=</span><span class="dv">10</span>, <span class="dt">USA=</span><span class="dv">20</span>, <span class="dt">BRA=</span><span class="dv">30</span>, <span class="dt">CHN=</span><span class="dv">40</span>, <span class="dt">IND=</span><span class="dv">50</span>)
m2 &lt;-<span class="st"> </span><span class="kw">as.magpie</span>(v)
<span class="kw">str</span>(m2)
<span class="co">#&gt; Formal class 'magpie' [package &quot;magclass&quot;] with 1 slot</span>
<span class="co">#&gt;   ..@ .Data: num [1:5, 1, 1] 10 20 30 40 50</span>
<span class="co">#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3</span>
<span class="co">#&gt;   .. .. ..$ fake: chr [1:5] &quot;ENG&quot; &quot;USA&quot; &quot;BRA&quot; &quot;CHN&quot; ...</span>
<span class="co">#&gt;   .. .. ..$ NA  : NULL</span>
<span class="co">#&gt;   .. .. ..$ NA  : NULL</span></code></pre></div>
<p>In the example above the names were automatically detected as regions, if for some reason the automatic detection fails you can also indicate to what type of dimension the data belongs. Lets assume in the following example, that the names are not representing regions but something else. The argument <code>spatial=0</code> indicates the non-existence of a spatial dimension, but it can also be used to point to the spatial dimension in the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m3 &lt;-<span class="st"> </span><span class="kw">as.magpie</span>(v, <span class="dt">spatial=</span><span class="dv">0</span>) 
<span class="kw">str</span>(m3)
<span class="co">#&gt; Formal class 'magpie' [package &quot;magclass&quot;] with 1 slot</span>
<span class="co">#&gt;   ..@ .Data: num [1, 1, 1:5] 10 20 30 40 50</span>
<span class="co">#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3</span>
<span class="co">#&gt;   .. .. ..$ fake: chr &quot;GLO&quot;</span>
<span class="co">#&gt;   .. .. ..$ NA  : NULL</span>
<span class="co">#&gt;   .. .. ..$ NA  : chr [1:5] &quot;ENG&quot; &quot;USA&quot; &quot;BRA&quot; &quot;CHN&quot; ...</span></code></pre></div>
</div>
<div id="accessing-magpie-objects" class="section level2">
<h2>Accessing magpie objects</h2>
<p>For the following the example data set <code>population_magpie</code> is used. For convenience we will just shorten its name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;population_magpie&quot;</span>)
pm &lt;-<span class="st"> </span>population_magpie</code></pre></div>
<div id="general-properties" class="section level3">
<h3>General properties</h3>
<p>Let’s first have a look at the content of the magpie object:</p>
<p>Show the structure of the object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(pm)
<span class="co">#&gt; Formal class 'magpie' [package &quot;magclass&quot;] with 1 slot</span>
<span class="co">#&gt;   ..@ .Data: num [1:10, 1:16, 1:2] 553 1281 554 276 452 ...</span>
<span class="co">#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3</span>
<span class="co">#&gt;   .. .. ..$ i       : chr [1:10] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; ...</span>
<span class="co">#&gt;   .. .. ..$ t       : chr [1:16] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; ...</span>
<span class="co">#&gt;   .. .. ..$ scenario: chr [1:2] &quot;A2&quot; &quot;B1&quot;</span></code></pre></div>
<p>Show the first elements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(pm)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      t</span>
<span class="co">#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045</span>
<span class="co">#&gt;   AFR  552.6664  696.44  889.18 1124.11 1389.33 1659.73</span>
<span class="co">#&gt;   CPA 1280.6350 1429.53 1518.46 1592.09 1640.95 1671.94</span>
<span class="co">#&gt;   EUR  554.4384  582.36  593.76  605.27  614.58  618.97</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      t</span>
<span class="co">#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045</span>
<span class="co">#&gt;   AFR  552.6664  721.85  932.04 1118.33 1267.33 1383.24</span>
<span class="co">#&gt;   CPA 1280.6350 1429.26 1499.74 1531.12 1518.73 1463.68</span>
<span class="co">#&gt;   EUR  554.4384  587.21  603.63  613.98  619.48  617.12</span></code></pre></div>
<p>Show the last elements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(pm)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      t</span>
<span class="co">#&gt; i       y2095   y2105   y2115   y2125   y2135   y2145</span>
<span class="co">#&gt;   PAO  166.31  167.49  167.49  167.49  167.49  167.49</span>
<span class="co">#&gt;   PAS  843.52  839.53  839.53  839.53  839.53  839.53</span>
<span class="co">#&gt;   SAS 3007.86 2972.39 2972.39 2972.39 2972.39 2972.39</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      t</span>
<span class="co">#&gt; i       y2095   y2105   y2115   y2125   y2135   y2145</span>
<span class="co">#&gt;   PAO  140.82  138.80  138.80  138.80  138.80  138.80</span>
<span class="co">#&gt;   PAS  536.24  507.06  507.06  507.06  507.06  507.06</span>
<span class="co">#&gt;   SAS 1629.07 1528.15 1528.15 1528.15 1528.15 1528.15</span></code></pre></div>
<p>Which regions are in the data and how many?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getRegions</span>(pm)
<span class="co">#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;</span>
<span class="kw">nregions</span>(pm)
<span class="co">#&gt; [1] 10</span></code></pre></div>
<p>Which years and how many?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getYears</span>(pm)
<span class="co">#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot; &quot;y2075&quot;</span>
<span class="co">#&gt; [10] &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;</span>
<span class="kw">nyears</span>(pm)
<span class="co">#&gt; [1] 16</span></code></pre></div>
<p>Which data elements?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getNames</span>(pm)
<span class="co">#&gt; [1] &quot;A2&quot; &quot;B1&quot;</span></code></pre></div>
<p>…and splitted in subdimensions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getNames</span>(pm,<span class="dt">fulldim=</span><span class="ot">TRUE</span>)
<span class="co">#&gt; $scenario</span>
<span class="co">#&gt; [1] &quot;A2&quot; &quot;B1&quot;</span></code></pre></div>
<p>…and how many?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ndata</span>(pm)
<span class="co">#&gt; [1] 2</span></code></pre></div>
<p>What are the sets (dimensions names) of the data?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getSets</span>(pm)
<span class="co">#&gt;       d1.1       d2.1       d3.1 </span>
<span class="co">#&gt;        &quot;i&quot;        &quot;t&quot; &quot;scenario&quot;</span></code></pre></div>
<p>are there any comments which come with the data?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getComment</span>(pm)
<span class="co">#&gt; NULL</span></code></pre></div>
<p>let’s have a look at the full dimensionality of the object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fulldim</span>(pm)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] 10 16  2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]]$i</span>
<span class="co">#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$t</span>
<span class="co">#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot; &quot;y2075&quot;</span>
<span class="co">#&gt; [10] &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$scenario</span>
<span class="co">#&gt; [1] &quot;A2&quot; &quot;B1&quot;</span></code></pre></div>
<p>if this is a bit confusing, this is the condensed version analogous to the standard 3 dim subsetting</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimnames</span>(pm)
<span class="co">#&gt; $i</span>
<span class="co">#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $t</span>
<span class="co">#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot; &quot;y2075&quot;</span>
<span class="co">#&gt; [10] &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $scenario</span>
<span class="co">#&gt; [1] &quot;A2&quot; &quot;B1&quot;</span></code></pre></div>
<p>These functions can also be used to manipulate the object:</p>
<p>set a comment</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getComment</span>(pm) &lt;-<span class="st"> &quot;This is a comment!&quot;</span> 
<span class="kw">getComment</span>(pm)
<span class="co">#&gt; [1] &quot;This is a comment!&quot;</span></code></pre></div>
<p>…or alternatively</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pm2 &lt;-<span class="st"> </span><span class="kw">setComment</span>(pm,<span class="st">&quot;This is comment for pm2!&quot;</span>)
<span class="kw">getComment</span>(pm2)
<span class="co">#&gt; [1] &quot;This is comment for pm2!&quot;</span></code></pre></div>
<p>rename 1st region in “RRR”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getRegions</span>(pm)[<span class="dv">1</span>] &lt;-<span class="st"> &quot;RRR&quot;</span> </code></pre></div>
<p>rename region set in “zones”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getSets</span>(pm)[<span class="dv">2</span>] &lt;-<span class="st"> &quot;year&quot;</span> </code></pre></div>
<p>The other functions such as getYears,… can be used in a similar manner.</p>
</div>
<div id="subsets" class="section level3">
<h3>Subsets</h3>
<p>Now that we have had a look into the structure of the object let’s extract some subsets out of it. There are different methods that can be used to extract data from a magpie object. Here are some examples:</p>
<p>Return all A2 related data for LAM and the years 2005 and 2015</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pm[<span class="st">&quot;LAM&quot;</span>,<span class="kw">c</span>(<span class="dv">2005</span>,<span class="dv">2015</span>),<span class="st">&quot;A2&quot;</span>]
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i      y2005  y2015</span>
<span class="co">#&gt;   LAM 558.29 646.02</span></code></pre></div>
<p>Return data for regions which have “AS” in its name (pmatch allows for partial matching of the given search string)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pm[<span class="st">&quot;AS&quot;</span>,,,pmatch=<span class="ot">TRUE</span>]
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045   y2055   y2065   y2075</span>
<span class="co">#&gt;   PAS  383.2277  534.73  604.94  668.49  723.13  767.30  798.68  819.21  834.31</span>
<span class="co">#&gt;   SAS 1269.9243 1505.02 1796.76 2095.48 2369.60 2600.68 2783.75 2920.70 3006.60</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i       y2085   y2095   y2105   y2115   y2125   y2135   y2145</span>
<span class="co">#&gt;   PAS  844.38  843.52  839.53  839.53  839.53  839.53  839.53</span>
<span class="co">#&gt;   SAS 3040.10 3007.86 2972.39 2972.39 2972.39 2972.39 2972.39</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045   y2055   y2065   y2075</span>
<span class="co">#&gt;   PAS  383.2277  530.67  590.42  639.68  674.98  692.45  689.79  668.98  634.64</span>
<span class="co">#&gt;   SAS 1269.9243 1475.64 1687.80 1870.96 1999.15 2072.68 2090.96 2049.18 1953.77</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i       y2085   y2095   y2105   y2115   y2125   y2135   y2145</span>
<span class="co">#&gt;   PAS  590.05  536.24  507.06  507.06  507.06  507.06  507.06</span>
<span class="co">#&gt;   SAS 1811.83 1629.07 1528.15 1528.15 1528.15 1528.15 1528.15</span></code></pre></div>
<p>If you want to specifically select from one dimension from which you have the dimension name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mselect</span>(pm, <span class="dt">scenario=</span><span class="st">&quot;B1&quot;</span>, <span class="dt">i=</span><span class="kw">c</span>(<span class="st">&quot;FSU&quot;</span>,<span class="st">&quot;LAM&quot;</span>))
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i        y1995  y2005  y2015  y2025  y2035  y2045  y2055  y2065  y2075  y2085</span>
<span class="co">#&gt;   FSU 276.3431 296.84 305.26 309.78 311.47 309.03 301.99 292.46 281.39 269.77</span>
<span class="co">#&gt;   LAM 451.9981 552.79 623.20 681.60 723.44 747.70 753.98 743.05 718.79 683.68</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i      y2095  y2105  y2115  y2125  y2135  y2145</span>
<span class="co">#&gt;   FSU 257.52 251.04 251.04 251.04 251.04 251.04</span>
<span class="co">#&gt;   LAM 637.69 611.88 611.88 611.88 611.88 611.88</span></code></pre></div>
</div>
<div id="data-transformations-calculations" class="section level3">
<h3>Data transformations / calculations</h3>
<p>Now we can perform some calculations with it.</p>
<p>take a subset of the data as an example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">head</span>(pm)</code></pre></div>
<p>create a new object with some fancy calculations</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span>d<span class="op">^</span><span class="dv">2</span><span class="op">+</span><span class="dv">12</span><span class="op">*</span>d<span class="op">+</span><span class="dv">99</span><span class="op">/</span><span class="kw">exp</span>(d)
<span class="kw">getNames</span>(d2) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;NEWSCEN1&quot;</span>,<span class="st">&quot;NEWSCEN2&quot;</span>)
<span class="kw">getSets</span>(d2)[<span class="dv">3</span>] &lt;-<span class="st"> &quot;newscen&quot;</span>
d2
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , newscen = NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i         y1995     y2005     y2015   y2025     y2035     y2045</span>
<span class="co">#&gt;   RRR  312072.1  493386.0  801311.2 1277113 1946909.7 2774620.4</span>
<span class="co">#&gt;   CPA 1655393.6 2060710.5 2323942.2 2553856 2712408.1 2815446.4</span>
<span class="co">#&gt;   EUR  314055.2  346131.5  359676.1  373615  385083.6  390551.5</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , newscen = NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i         y1995     y2005     y2015     y2025     y2035     y2045</span>
<span class="co">#&gt;   RRR  312072.1  529729.6  879883.0 1264081.9 1621333.2 1929951.8</span>
<span class="co">#&gt;   CPA 1655393.6 2059935.3 2267216.9 2362701.9 2324765.5 2159923.5</span>
<span class="co">#&gt;   EUR  314055.2  351862.1  371612.7  384339.2  391189.2  388242.5</span></code></pre></div>
<p>multiply both data sets with each other</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span>d<span class="op">*</span>d2
d
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  172471773  343613717  712509904 1435615002 2704899949 4605120609</span>
<span class="co">#&gt;   CPA 2119955061 2945847491 3528813140 4065967778 4450926008 4707257368</span>
<span class="co">#&gt;   EUR  174124277  201573119  213561266  226137981  236664659  241739628</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  172471773  356150641  746854091 1428233254 2467376967 3837965851</span>
<span class="co">#&gt;   CPA 2119955061 2945291059 3485309011 3910259280 4119415564 4120912807</span>
<span class="co">#&gt;   EUR  174124277  203251869  217111267  229392153  238551555  241017118</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  172471773  368924875  782374360 1420967030 2252566752 3203198781</span>
<span class="co">#&gt;   CPA 2119955061 2944739364 3442678113 3761633954 3814823856 3611262304</span>
<span class="co">#&gt;   EUR  174124277  204910425  220648786  232628981  240417069  240310466</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  172471773  382385289  820086132 1413660600 2054764104 2669586440</span>
<span class="co">#&gt;   CPA 2119955061 2944183141 3400235879 3617580090 3530691083 3161436886</span>
<span class="co">#&gt;   EUR  174124277  206616969  224316602  235976560  242333882  239592227</span></code></pre></div>
<p>Because we changed the names of the elements in the data dimension it is assumed that they reflect different dimensions. Therefor the object is blown up in size instead of just having the elements multiplied pairwise with each other as it happens when two objects with identical dimensionality are multiplied with each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2<span class="op">*</span>d2
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , newscen = NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015        y2025        y2035</span>
<span class="co">#&gt;   RRR 9.738901e+10 2.434297e+11 6.420997e+11 1.631017e+12 3.790457e+12</span>
<span class="co">#&gt;   CPA 2.740328e+12 4.246528e+12 5.400707e+12 6.522178e+12 7.357158e+12</span>
<span class="co">#&gt;   EUR 9.863068e+10 1.198070e+11 1.293669e+11 1.395882e+11 1.482893e+11</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y2045</span>
<span class="co">#&gt;   RRR 7.698518e+12</span>
<span class="co">#&gt;   CPA 7.926739e+12</span>
<span class="co">#&gt;   EUR 1.525304e+11</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , newscen = NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015        y2025        y2035</span>
<span class="co">#&gt;   RRR 9.738901e+10 2.806134e+11 7.741941e+11 1.597903e+12 2.628721e+12</span>
<span class="co">#&gt;   CPA 2.740328e+12 4.243333e+12 5.140273e+12 5.582360e+12 5.404535e+12</span>
<span class="co">#&gt;   EUR 9.863068e+10 1.238070e+11 1.380960e+11 1.477166e+11 1.530290e+11</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y2045</span>
<span class="co">#&gt;   RRR 3.724714e+12</span>
<span class="co">#&gt;   CPA 4.665269e+12</span>
<span class="co">#&gt;   EUR 1.507323e+11</span></code></pre></div>
<p>sum over the data dimension</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimSums</span>(d,<span class="dt">dim=</span><span class="dv">3</span>)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995       y2005       y2015       y2025       y2035       y2045</span>
<span class="co">#&gt;   RRR  689887091  1451074522  3061824487  5698475887  9479607771 14315871681</span>
<span class="co">#&gt;   CPA 8479820244 11780061055 13857036143 15355441102 15915856510 15600869364</span>
<span class="co">#&gt;   EUR  696497109   816352383   875637922   924135674   957967165   962659440</span></code></pre></div>
<p>..over the second data dimension only</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimSums</span>(d,<span class="dt">dim=</span><span class="fl">3.2</span>)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  344943546  712538592 1494884264 2856582032 4957466700 7808319390</span>
<span class="co">#&gt;   CPA 4239910122 5890586855 6971491254 7827601732 8265749863 8318519671</span>
<span class="co">#&gt;   EUR  348248554  406483544  434210052  458766961  477081728  482050095</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  344943546  738535930 1566940224 2841893854 4522141071 6507552291</span>
<span class="co">#&gt;   CPA 4239910122 5889474200 6885544890 7527839370 7650106647 7282349693</span>
<span class="co">#&gt;   EUR  348248554  409868839  441427869  465368713  480885436  480609345</span></code></pre></div>
<p>..or alternatively addressed by name</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimSums</span>(d,<span class="dt">dim=</span><span class="st">&quot;newscen&quot;</span>)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario = A2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  344943546  712538592 1494884264 2856582032 4957466700 7808319390</span>
<span class="co">#&gt;   CPA 4239910122 5890586855 6971491254 7827601732 8265749863 8318519671</span>
<span class="co">#&gt;   EUR  348248554  406483544  434210052  458766961  477081728  482050095</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario = B1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  344943546  738535930 1566940224 2841893854 4522141071 6507552291</span>
<span class="co">#&gt;   CPA 4239910122 5889474200 6885544890 7527839370 7650106647 7282349693</span>
<span class="co">#&gt;   EUR  348248554  409868839  441427869  465368713  480885436  480609345</span></code></pre></div>
<p>sum over regions and first data dimension</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimSums</span>(d,<span class="dt">dim=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="fl">3.1</span>))
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , newscen = NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       year</span>
<span class="co">#&gt; region      y1995      y2005      y2015       y2025       y2035       y2045</span>
<span class="co">#&gt;    GLO 4933102222 6995727898 8904158681 11295605448 14217834702 17754013380</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , newscen = NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       year</span>
<span class="co">#&gt; region      y1995      y2005      y2015       y2025       y2035       y2045</span>
<span class="co">#&gt;    GLO 4933102222 7051760063 8890339872 10682447215 12135596744 13125387105</span></code></pre></div>
<p>apply a lowpass filter on the data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lowpass</span>(d)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  215257259  393052278  801062132 1572159964 2862633877 4130065444</span>
<span class="co">#&gt;   CPA 2326428169 2885115796 3517360387 4027918676 4418769290 4643174528</span>
<span class="co">#&gt;   EUR  180986488  197707946  213708408  225625472  235301732  240470886</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  218391490  407906787  819523019 1517674392 2550238260 3495318630</span>
<span class="co">#&gt;   CPA 2326289061 2873961548 3456542090 3856310784 4067500804 4120538496</span>
<span class="co">#&gt;   EUR  181406175  199434821  216716639  228611782  236878095  240400727</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  221585048  423173971  838660156 1469218793 2282324829 2965540774</span>
<span class="co">#&gt;   CPA 2326151137 2863027975 3397932386 3695192469 3750635992 3662152692</span>
<span class="co">#&gt;   EUR  181820814  201148478  219709244  231580954  238443396  240337117</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045</span>
<span class="co">#&gt;   RRR  224950152  439332121  859054538 1425542859 2048193812 2515880856</span>
<span class="co">#&gt;   CPA 2326012081 2852139305 3340558747 3541521785 3460099785 3253750435</span>
<span class="co">#&gt;   EUR  182247450  202918704  222806683  234650901  240059138  240277641</span></code></pre></div>
<p>do a linear interpolation of the data over time (yearly)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_interpolate</span>(d,<span class="dv">2005</span><span class="op">:</span><span class="dv">2030</span>)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , NA = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010</span>
<span class="co">#&gt;   RRR  343613717  380503336  417392955  454282573  491172192  528061811</span>
<span class="co">#&gt;   CPA 2945847491 3004144056 3062440621 3120737186 3179033751 3237330316</span>
<span class="co">#&gt;   EUR  201573119  202771934  203970749  205169563  206368378  207567193</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016</span>
<span class="co">#&gt;   RRR  564951429  601841048  638730667  675620285  712509904  784820414</span>
<span class="co">#&gt;   CPA 3295626881 3353923446 3412220011 3470516576 3528813140 3582528604</span>
<span class="co">#&gt;   EUR  208766008  209964822  211163637  212362452  213561266  214818938</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022</span>
<span class="co">#&gt;   RRR  857130924  929441434 1001751943 1074062453 1146372963 1218683473</span>
<span class="co">#&gt;   CPA 3636244068 3689959532 3743674995 3797390459 3851105923 3904821386</span>
<span class="co">#&gt;   EUR  216076609  217334281  218591952  219849624  221107295  222364966</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028</span>
<span class="co">#&gt;   RRR 1290993983 1363304493 1435615002 1562543497 1689471992 1816400486</span>
<span class="co">#&gt;   CPA 3958536850 4012252314 4065967778 4104463601 4142959424 4181455247</span>
<span class="co">#&gt;   EUR  223622638  224880309  226137981  227190648  228243316  229295984</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2029      y2030</span>
<span class="co">#&gt;   RRR 1943328981 2070257476</span>
<span class="co">#&gt;   CPA 4219951070 4258446893</span>
<span class="co">#&gt;   EUR  230348652  231401320</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , NA = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010</span>
<span class="co">#&gt;   RRR  356150641  395220986  434291331  473361676  512432021  551502366</span>
<span class="co">#&gt;   CPA 2945291059 2999292855 3053294650 3107296445 3161298240 3215300035</span>
<span class="co">#&gt;   EUR  203251869  204637809  206023749  207409689  208795629  210181568</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016</span>
<span class="co">#&gt;   RRR  590572711  629643056  668713401  707783746  746854091  814992008</span>
<span class="co">#&gt;   CPA 3269301830 3323303626 3377305421 3431307216 3485309011 3527804038</span>
<span class="co">#&gt;   EUR  211567508  212953448  214339388  215725328  217111267  218339356</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022</span>
<span class="co">#&gt;   RRR  883129924  951267840 1019405756 1087543673 1155681589 1223819505</span>
<span class="co">#&gt;   CPA 3570299065 3612794092 3655289119 3697784146 3740279173 3782774199</span>
<span class="co">#&gt;   EUR  219567445  220795533  222023622  223251710  224479799  225707887</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028</span>
<span class="co">#&gt;   RRR 1291957422 1360095338 1428233254 1532147626 1636061997 1739976368</span>
<span class="co">#&gt;   CPA 3825269226 3867764253 3910259280 3931174909 3952090537 3973006165</span>
<span class="co">#&gt;   EUR  226935976  228164064  229392153  230308093  231224033  232139974</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2029      y2030</span>
<span class="co">#&gt;   RRR 1843890739 1947805111</span>
<span class="co">#&gt;   CPA 3993921794 4014837422</span>
<span class="co">#&gt;   EUR  233055914  233971854</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , NA = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010</span>
<span class="co">#&gt;   RRR  368924875  410269823  451614772  492959720  534304669  575649617</span>
<span class="co">#&gt;   CPA 2944739364 2994533238 3044327113 3094120988 3143914863 3193708738</span>
<span class="co">#&gt;   EUR  204910425  206484261  208058097  209631933  211205769  212779605</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016</span>
<span class="co">#&gt;   RRR  616994566  658339514  699684463  741029411  782374360  846233627</span>
<span class="co">#&gt;   CPA 3243502613 3293296488 3343090363 3392884238 3442678113 3474573697</span>
<span class="co">#&gt;   EUR  214353441  215927278  217501114  219074950  220648786  221846805</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022</span>
<span class="co">#&gt;   RRR  910092894  973952161 1037811428 1101670695 1165529962 1229389229</span>
<span class="co">#&gt;   CPA 3506469281 3538364865 3570260450 3602156034 3634051618 3665947202</span>
<span class="co">#&gt;   EUR  223044825  224242844  225440864  226638883  227836903  229034922</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028</span>
<span class="co">#&gt;   RRR 1293248496 1357107763 1420967030 1504127002 1587286974 1670446946</span>
<span class="co">#&gt;   CPA 3697842786 3729738370 3761633954 3766952945 3772271935 3777590925</span>
<span class="co">#&gt;   EUR  230232942  231430961  232628981  233407789  234186598  234965407</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2029      y2030</span>
<span class="co">#&gt;   RRR 1753606919 1836766891</span>
<span class="co">#&gt;   CPA 3782909915 3788228905</span>
<span class="co">#&gt;   EUR  235744216  236523025</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , NA = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010</span>
<span class="co">#&gt;   RRR  382385289  426155374  469925458  513695542  557465627  601235711</span>
<span class="co">#&gt;   CPA 2944183141 2989788415 3035393688 3080998962 3126604236 3172209510</span>
<span class="co">#&gt;   EUR  206616969  208386932  210156896  211926859  213696822  215466785</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016</span>
<span class="co">#&gt;   RRR  645005795  688775879  732545964  776316048  820086132  879443579</span>
<span class="co">#&gt;   CPA 3217814784 3263420057 3309025331 3354630605 3400235879 3421970300</span>
<span class="co">#&gt;   EUR  217236749  219006712  220776675  222546639  224316602  225482598</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022</span>
<span class="co">#&gt;   RRR  938801026  998158473 1057515919 1116873366 1176230813 1235588260</span>
<span class="co">#&gt;   CPA 3443704721 3465439142 3487173563 3508907984 3530642406 3552376827</span>
<span class="co">#&gt;   EUR  226648593  227814589  228980585  230146581  231312577  232478572</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028</span>
<span class="co">#&gt;   RRR 1294945706 1354303153 1413660600 1477770950 1541881301 1605991651</span>
<span class="co">#&gt;   CPA 3574111248 3595845669 3617580090 3608891189 3600202289 3591513388</span>
<span class="co">#&gt;   EUR  233644568  234810564  235976560  236612292  237248024  237883756</span>
<span class="co">#&gt;      NA</span>
<span class="co">#&gt; fake       y2029      y2030</span>
<span class="co">#&gt;   RRR 1670102001 1734212352</span>
<span class="co">#&gt;   CPA 3582824487 3574135586</span>
<span class="co">#&gt;   EUR  238519489  239155221</span></code></pre></div>
<p>split the data, do some calculations and bind it back together</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d1 &lt;-<span class="st"> </span>d[,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]<span class="op">*</span><span class="dv">100</span>
d2 &lt;-<span class="st"> </span>d[,<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>,]<span class="op">*</span>(<span class="op">-</span><span class="dv">1</span>)
dd &lt;-<span class="st"> </span><span class="kw">mbind</span>(d1,d2)
dd
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015       y2025       y2035</span>
<span class="co">#&gt;   RRR  17247177286  34361371712  71250990410 -1435615002 -2704899949</span>
<span class="co">#&gt;   CPA 211995506103 294584749142 352881314048 -4065967778 -4450926008</span>
<span class="co">#&gt;   EUR  17412427723  20157311917  21356126643  -226137981  -236664659</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i           y2045</span>
<span class="co">#&gt;   RRR -4605120609</span>
<span class="co">#&gt;   CPA -4707257368</span>
<span class="co">#&gt;   EUR  -241739628</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015       y2025       y2035</span>
<span class="co">#&gt;   RRR  17247177286  35615064104  74685409122 -1428233254 -2467376967</span>
<span class="co">#&gt;   CPA 211995506103 294529105935 348530901109 -3910259280 -4119415564</span>
<span class="co">#&gt;   EUR  17412427723  20325186949  21711126748  -229392153  -238551555</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i           y2045</span>
<span class="co">#&gt;   RRR -3837965851</span>
<span class="co">#&gt;   CPA -4120912807</span>
<span class="co">#&gt;   EUR  -241017118</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015       y2025       y2035</span>
<span class="co">#&gt;   RRR  17247177286  36892487484  78237435983 -1420967030 -2252566752</span>
<span class="co">#&gt;   CPA 211995506103 294473936352 344267811303 -3761633954 -3814823856</span>
<span class="co">#&gt;   EUR  17412427723  20491042497  22064878583  -232628981  -240417069</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i           y2045</span>
<span class="co">#&gt;   RRR -3203198781</span>
<span class="co">#&gt;   CPA -3611262304</span>
<span class="co">#&gt;   EUR  -240310466</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i            y1995        y2005        y2015       y2025       y2035</span>
<span class="co">#&gt;   RRR  17247177286  38238528941  82008613234 -1413660600 -2054764104</span>
<span class="co">#&gt;   CPA 211995506103 294418314075 340023587875 -3617580090 -3530691083</span>
<span class="co">#&gt;   EUR  17412427723  20661696919  22431660178  -235976560  -242333882</span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i           y2045</span>
<span class="co">#&gt;   RRR -2669586440</span>
<span class="co">#&gt;   CPA -3161436886</span>
<span class="co">#&gt;   EUR  -239592227</span></code></pre></div>
<p>set all values greater than 0.5 to 0.51</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d[d <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.5</span>] &lt;-<span class="st"> </span><span class="fl">0.51</span>
d
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51</span>
<span class="co">#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51</span></code></pre></div>
<p>round the data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(d,<span class="dv">0</span>)
<span class="co">#&gt; An object of class &quot;magpie&quot;</span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR     1     1     1     1     1     1</span>
<span class="co">#&gt;   CPA     1     1     1     1     1     1</span>
<span class="co">#&gt;   EUR     1     1     1     1     1     1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR     1     1     1     1     1     1</span>
<span class="co">#&gt;   CPA     1     1     1     1     1     1</span>
<span class="co">#&gt;   EUR     1     1     1     1     1     1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = A2.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR     1     1     1     1     1     1</span>
<span class="co">#&gt;   CPA     1     1     1     1     1     1</span>
<span class="co">#&gt;   EUR     1     1     1     1     1     1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , scenario.newscen = B1.NEWSCEN2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      year</span>
<span class="co">#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045</span>
<span class="co">#&gt;   RRR     1     1     1     1     1     1</span>
<span class="co">#&gt;   CPA     1     1     1     1     1     1</span>
<span class="co">#&gt;   EUR     1     1     1     1     1     1</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
