<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Generate a magpie object</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<p>This tutorial provides a basic introduction to magpie objects in R. If you would like to get more details on the concept of and the idea behind magpie objects you can have a look at <a href="magclass-concept.html">magclass-concept</a>, where this is explained in more detail by comparing the magpie class to other data classes in R.</p>

<h2>Generate a magpie object</h2>

<p>Generation of magpie objects can either be done from scratch, by reading in files or by converting objects from other classes to magpie objects. For creation of a new magpie object you can use <code>new.magpie</code>, conversion of an existing object happens with <code>as.magpie</code>:</p>

<pre><code class="r">library(magclass)

# creating a magpie object with 2 regions, 2 years and 2 different values
m &lt;- new.magpie(cells_and_regions=c(&quot;AFR&quot;,&quot;CPA&quot;),
                years=c(1995,2000),
                names=c(&quot;bla&quot;,&quot;blub&quot;),
                sets=c(&quot;region&quot;,&quot;year&quot;,&quot;value&quot;),
                fill=0)
print(m)
#&gt; , , value = bla
#&gt; 
#&gt;       year
#&gt; region y1995 y2000
#&gt;    AFR     0     0
#&gt;    CPA     0     0
#&gt; 
#&gt; , , value = blub
#&gt; 
#&gt;       year
#&gt; region y1995 y2000
#&gt;    AFR     0     0
#&gt;    CPA     0     0

# converting a simple vector with one value per region to a magpie object
v &lt;- c(ENG=10, USA=20, BRA=30, CHN=40, IND=50)
m2 &lt;- as.magpie(v)
str(m2)
#&gt; Formal class &#39;magpie&#39; [package &quot;magclass&quot;] with 1 slot
#&gt;   ..@ .Data: num [1:5, 1, 1] 10 20 30 40 50
#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3
#&gt;   .. .. ..$ fake: chr [1:5] &quot;ENG&quot; &quot;USA&quot; &quot;BRA&quot; &quot;CHN&quot; ...
#&gt;   .. .. ..$ NA  : NULL
#&gt;   .. .. ..$ NA  : NULL
</code></pre>

<p>In the example above the names were automatically detected as regions, if for some reason the automatic detection fails you can also indicate to what type of dimension the data belongs. Lets assume in the following example, that the names are not representing regions but something else. The argument <code>spatial=0</code> indicates the non-existence of a spatial dimension, but it can also be used to point to the spatial dimension in the data.</p>

<pre><code class="r">m3 &lt;- as.magpie(v, spatial=0) 
str(m3)
#&gt; Formal class &#39;magpie&#39; [package &quot;magclass&quot;] with 1 slot
#&gt;   ..@ .Data: num [1, 1, 1:5] 10 20 30 40 50
#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3
#&gt;   .. .. ..$ fake: chr &quot;GLO&quot;
#&gt;   .. .. ..$ NA  : NULL
#&gt;   .. .. ..$ NA  : chr [1:5] &quot;ENG&quot; &quot;USA&quot; &quot;BRA&quot; &quot;CHN&quot; ...
</code></pre>

<h2>Accessing magpie objects</h2>

<p>For the following the example data set <code>population_magpie</code> is used. For convenience we will just shorten its name:</p>

<pre><code class="r">data(&quot;population_magpie&quot;)
pm &lt;- population_magpie
</code></pre>

<h3>General properties</h3>

<p>Let&#39;s first have a look at the content of the magpie object:</p>

<p>Show the structure of the object:</p>

<pre><code class="r">str(pm)
#&gt; Formal class &#39;magpie&#39; [package &quot;magclass&quot;] with 1 slot
#&gt;   ..@ .Data: num [1:10, 1:16, 1:2] 553 1281 554 276 452 ...
#&gt;   .. ..- attr(*, &quot;dimnames&quot;)=List of 3
#&gt;   .. .. ..$ i       : chr [1:10] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; ...
#&gt;   .. .. ..$ t       : chr [1:16] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; ...
#&gt;   .. .. ..$ scenario: chr [1:2] &quot;A2&quot; &quot;B1&quot;
</code></pre>

<p>Show the first elements:</p>

<pre><code class="r">head(pm)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      t
#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045
#&gt;   AFR  552.6664  696.44  889.18 1124.11 1389.33 1659.73
#&gt;   CPA 1280.6350 1429.53 1518.46 1592.09 1640.95 1671.94
#&gt;   EUR  554.4384  582.36  593.76  605.27  614.58  618.97
#&gt; 
#&gt; , , scenario = B1
#&gt; 
#&gt;      t
#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045
#&gt;   AFR  552.6664  721.85  932.04 1118.33 1267.33 1383.24
#&gt;   CPA 1280.6350 1429.26 1499.74 1531.12 1518.73 1463.68
#&gt;   EUR  554.4384  587.21  603.63  613.98  619.48  617.12
</code></pre>

<p>Show the last elements:</p>

<pre><code class="r">tail(pm)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      t
#&gt; i       y2095   y2105   y2115   y2125   y2135   y2145
#&gt;   PAO  166.31  167.49  167.49  167.49  167.49  167.49
#&gt;   PAS  843.52  839.53  839.53  839.53  839.53  839.53
#&gt;   SAS 3007.86 2972.39 2972.39 2972.39 2972.39 2972.39
#&gt; 
#&gt; , , scenario = B1
#&gt; 
#&gt;      t
#&gt; i       y2095   y2105   y2115   y2125   y2135   y2145
#&gt;   PAO  140.82  138.80  138.80  138.80  138.80  138.80
#&gt;   PAS  536.24  507.06  507.06  507.06  507.06  507.06
#&gt;   SAS 1629.07 1528.15 1528.15 1528.15 1528.15 1528.15
</code></pre>

<p>Which regions are in the data and how many?</p>

<pre><code class="r">getRegions(pm)
#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;
nregions(pm)
#&gt; [1] 10
</code></pre>

<p>Which years and how many?</p>

<pre><code class="r">getYears(pm)
#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot;
#&gt;  [9] &quot;y2075&quot; &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;
nyears(pm)
#&gt; [1] 16
</code></pre>

<p>Which data elements?</p>

<pre><code class="r">getNames(pm)
#&gt; [1] &quot;A2&quot; &quot;B1&quot;
</code></pre>

<p>&hellip;and splitted in subdimensions</p>

<pre><code class="r">getNames(pm,fulldim=TRUE)
#&gt; $scenario
#&gt; [1] &quot;A2&quot; &quot;B1&quot;
</code></pre>

<p>&hellip;and how many?</p>

<pre><code class="r">ndata(pm)
#&gt; [1] 2
</code></pre>

<p>What are the sets (dimensions names) of the data?</p>

<pre><code class="r">getSets(pm)
#&gt; [1] &quot;i&quot;        &quot;t&quot;        &quot;scenario&quot;
</code></pre>

<p>are there any comments which come with the data?</p>

<pre><code class="r">getComment(pm)
#&gt; NULL
</code></pre>

<p>let&#39;s have a look at the full dimensionality of the object</p>

<pre><code class="r">fulldim(pm)
#&gt; [[1]]
#&gt; [1] 10 16  2
#&gt; 
#&gt; [[2]]
#&gt; [[2]]$i
#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;
#&gt; 
#&gt; [[2]]$t
#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot;
#&gt;  [9] &quot;y2075&quot; &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;
#&gt; 
#&gt; [[2]]$scenario
#&gt; [1] &quot;A2&quot; &quot;B1&quot;
</code></pre>

<p>if this is a bit confusing, this is the condensed version analogous to the standard 3 dim subsetting</p>

<pre><code class="r">dimnames(pm)
#&gt; $i
#&gt;  [1] &quot;AFR&quot; &quot;CPA&quot; &quot;EUR&quot; &quot;FSU&quot; &quot;LAM&quot; &quot;MEA&quot; &quot;NAM&quot; &quot;PAO&quot; &quot;PAS&quot; &quot;SAS&quot;
#&gt; 
#&gt; $t
#&gt;  [1] &quot;y1995&quot; &quot;y2005&quot; &quot;y2015&quot; &quot;y2025&quot; &quot;y2035&quot; &quot;y2045&quot; &quot;y2055&quot; &quot;y2065&quot;
#&gt;  [9] &quot;y2075&quot; &quot;y2085&quot; &quot;y2095&quot; &quot;y2105&quot; &quot;y2115&quot; &quot;y2125&quot; &quot;y2135&quot; &quot;y2145&quot;
#&gt; 
#&gt; $scenario
#&gt; [1] &quot;A2&quot; &quot;B1&quot;
</code></pre>

<p>These functions can also be used to manipulate the object:</p>

<p>set a comment</p>

<pre><code class="r">getComment(pm) &lt;- &quot;This is a comment!&quot; 
getComment(pm)
#&gt; [1] &quot;This is a comment!&quot;
</code></pre>

<p>&hellip;or alternatively</p>

<pre><code class="r">pm2 &lt;- setComment(pm,&quot;This is comment for pm2!&quot;)
getComment(pm2)
#&gt; [1] &quot;This is comment for pm2!&quot;
</code></pre>

<p>rename 1st region in &ldquo;RRR&rdquo; </p>

<pre><code class="r">getRegions(pm)[1] &lt;- &quot;RRR&quot; 
</code></pre>

<p>rename region set in &ldquo;zones&rdquo; </p>

<pre><code class="r">getSets(pm)[2] &lt;- &quot;year&quot; 
</code></pre>

<p>The other functions such as getYears,&hellip; can be used in a similar manner.</p>

<h3>Subsets</h3>

<p>Now that we have had a look into the structure of the object let&#39;s extract some subsets out of it. There are different methods that can be used to extract data from a magpie object. Here are some examples:</p>

<p>Return all A2 related data for LAM and the years 2005 and 2015</p>

<pre><code class="r">pm[&quot;LAM&quot;,c(2005,2015),&quot;A2&quot;]
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      year
#&gt; i      y2005  y2015
#&gt;   LAM 558.29 646.02
</code></pre>

<p>Return data for regions which have &ldquo;AS&rdquo; in its name (pmatch allows for partial matching of the given search string)</p>

<pre><code class="r">pm[&quot;AS&quot;,,,pmatch=TRUE]
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      year
#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045   y2055   y2065
#&gt;   PAS  383.2277  534.73  604.94  668.49  723.13  767.30  798.68  819.21
#&gt;   SAS 1269.9243 1505.02 1796.76 2095.48 2369.60 2600.68 2783.75 2920.70
#&gt;      year
#&gt; i       y2075   y2085   y2095   y2105   y2115   y2125   y2135   y2145
#&gt;   PAS  834.31  844.38  843.52  839.53  839.53  839.53  839.53  839.53
#&gt;   SAS 3006.60 3040.10 3007.86 2972.39 2972.39 2972.39 2972.39 2972.39
#&gt; 
#&gt; , , scenario = B1
#&gt; 
#&gt;      year
#&gt; i         y1995   y2005   y2015   y2025   y2035   y2045   y2055   y2065
#&gt;   PAS  383.2277  530.67  590.42  639.68  674.98  692.45  689.79  668.98
#&gt;   SAS 1269.9243 1475.64 1687.80 1870.96 1999.15 2072.68 2090.96 2049.18
#&gt;      year
#&gt; i       y2075   y2085   y2095   y2105   y2115   y2125   y2135   y2145
#&gt;   PAS  634.64  590.05  536.24  507.06  507.06  507.06  507.06  507.06
#&gt;   SAS 1953.77 1811.83 1629.07 1528.15 1528.15 1528.15 1528.15 1528.15
</code></pre>

<p>If you want to specifically select from one dimension from which you have the dimension name:</p>

<pre><code class="r">mselect(pm, scenario=&quot;B1&quot;, i=c(&quot;FSU&quot;,&quot;LAM&quot;))
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = B1
#&gt; 
#&gt;      year
#&gt; i        y1995  y2005  y2015  y2025  y2035  y2045  y2055  y2065  y2075
#&gt;   FSU 276.3431 296.84 305.26 309.78 311.47 309.03 301.99 292.46 281.39
#&gt;   LAM 451.9981 552.79 623.20 681.60 723.44 747.70 753.98 743.05 718.79
#&gt;      year
#&gt; i      y2085  y2095  y2105  y2115  y2125  y2135  y2145
#&gt;   FSU 269.77 257.52 251.04 251.04 251.04 251.04 251.04
#&gt;   LAM 683.68 637.69 611.88 611.88 611.88 611.88 611.88
</code></pre>

<h3>Data transformations / calculations</h3>

<p>Now we can perform some calculations with it.</p>

<p>take a subset of the data as an example</p>

<pre><code class="r">d &lt;- head(pm)
</code></pre>

<p>create a new object with some fancy calculations</p>

<pre><code class="r">d2 &lt;- d^2+12*d+99/exp(d)
getNames(d2) &lt;- c(&quot;NEWSCEN1&quot;,&quot;NEWSCEN2&quot;)
getSets(d2)[3] &lt;- &quot;newscen&quot;
d2
#&gt; An object of class &quot;magpie&quot;
#&gt; , , newscen = NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i         y1995     y2005     y2015   y2025     y2035     y2045
#&gt;   RRR  312072.1  493386.0  801311.2 1277113 1946909.7 2774620.4
#&gt;   CPA 1655393.6 2060710.5 2323942.2 2553856 2712408.1 2815446.4
#&gt;   EUR  314055.2  346131.5  359676.1  373615  385083.6  390551.5
#&gt; 
#&gt; , , newscen = NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i         y1995     y2005     y2015     y2025     y2035     y2045
#&gt;   RRR  312072.1  529729.6  879883.0 1264081.9 1621333.2 1929951.8
#&gt;   CPA 1655393.6 2059935.3 2267216.9 2362701.9 2324765.5 2159923.5
#&gt;   EUR  314055.2  351862.1  371612.7  384339.2  391189.2  388242.5
</code></pre>

<p>multiply both data sets with each other</p>

<pre><code class="r">d &lt;- d*d2
d
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario.newscen = A2.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  172471773  343613717  712509904 1435615002 2704899949 4605120609
#&gt;   CPA 2119955061 2945847491 3528813140 4065967778 4450926008 4707257368
#&gt;   EUR  174124277  201573119  213561266  226137981  236664659  241739628
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  172471773  356150641  746854091 1428233254 2467376967 3837965851
#&gt;   CPA 2119955061 2945291059 3485309011 3910259280 4119415564 4120912807
#&gt;   EUR  174124277  203251869  217111267  229392153  238551555  241017118
#&gt; 
#&gt; , , scenario.newscen = A2.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  172471773  368924875  782374360 1420967030 2252566752 3203198781
#&gt;   CPA 2119955061 2944739364 3442678113 3761633954 3814823856 3611262304
#&gt;   EUR  174124277  204910425  220648786  232628981  240417069  240310466
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  172471773  382385289  820086132 1413660600 2054764104 2669586440
#&gt;   CPA 2119955061 2944183141 3400235879 3617580090 3530691083 3161436886
#&gt;   EUR  174124277  206616969  224316602  235976560  242333882  239592227
</code></pre>

<p>Because we changed the names of the elements in the data dimension it is assumed that they reflect different dimensions. Therefor the object is blown up in size instead of just having the elements multiplied pairwise with each other as it happens when two objects with identical dimensionality are multiplied with each other:</p>

<pre><code class="r">d2*d2
#&gt; An object of class &quot;magpie&quot;
#&gt; , , newscen = NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015        y2025        y2035
#&gt;   RRR 9.738901e+10 2.434297e+11 6.420997e+11 1.631017e+12 3.790457e+12
#&gt;   CPA 2.740328e+12 4.246528e+12 5.400707e+12 6.522178e+12 7.357158e+12
#&gt;   EUR 9.863068e+10 1.198070e+11 1.293669e+11 1.395882e+11 1.482893e+11
#&gt;      year
#&gt; i            y2045
#&gt;   RRR 7.698518e+12
#&gt;   CPA 7.926739e+12
#&gt;   EUR 1.525304e+11
#&gt; 
#&gt; , , newscen = NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015        y2025        y2035
#&gt;   RRR 9.738901e+10 2.806134e+11 7.741941e+11 1.597903e+12 2.628721e+12
#&gt;   CPA 2.740328e+12 4.243333e+12 5.140273e+12 5.582360e+12 5.404535e+12
#&gt;   EUR 9.863068e+10 1.238070e+11 1.380960e+11 1.477166e+11 1.530290e+11
#&gt;      year
#&gt; i            y2045
#&gt;   RRR 3.724714e+12
#&gt;   CPA 4.665269e+12
#&gt;   EUR 1.507323e+11
</code></pre>

<p>sum over the data dimension</p>

<pre><code class="r">dimSums(d,dim=3)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , 1
#&gt; 
#&gt;      year
#&gt; i          y1995       y2005       y2015       y2025       y2035
#&gt;   RRR  689887091  1451074522  3061824487  5698475887  9479607771
#&gt;   CPA 8479820244 11780061055 13857036143 15355441102 15915856510
#&gt;   EUR  696497109   816352383   875637922   924135674   957967165
#&gt;      year
#&gt; i           y2045
#&gt;   RRR 14315871681
#&gt;   CPA 15600869364
#&gt;   EUR   962659440
</code></pre>

<p>..over the second data dimension only</p>

<pre><code class="r">dimSums(d,dim=3.2)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  344943546  712538592 1494884264 2856582032 4957466700 7808319390
#&gt;   CPA 4239910122 5890586855 6971491254 7827601732 8265749863 8318519671
#&gt;   EUR  348248554  406483544  434210052  458766961  477081728  482050095
#&gt; 
#&gt; , , scenario = B1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  344943546  738535930 1566940224 2841893854 4522141071 6507552291
#&gt;   CPA 4239910122 5889474200 6885544890 7527839370 7650106647 7282349693
#&gt;   EUR  348248554  409868839  441427869  465368713  480885436  480609345
</code></pre>

<p>..or alternatively addressed by name</p>

<pre><code class="r">dimSums(d,dim=&quot;newscen&quot;)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario = A2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  344943546  712538592 1494884264 2856582032 4957466700 7808319390
#&gt;   CPA 4239910122 5890586855 6971491254 7827601732 8265749863 8318519671
#&gt;   EUR  348248554  406483544  434210052  458766961  477081728  482050095
#&gt; 
#&gt; , , scenario = B1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  344943546  738535930 1566940224 2841893854 4522141071 6507552291
#&gt;   CPA 4239910122 5889474200 6885544890 7527839370 7650106647 7282349693
#&gt;   EUR  348248554  409868839  441427869  465368713  480885436  480609345
</code></pre>

<p>sum over regions and first data dimension</p>

<pre><code class="r">dimSums(d,dim=c(1,3.1))
#&gt; An object of class &quot;magpie&quot;
#&gt; , , newscen = NEWSCEN1
#&gt; 
#&gt;       year
#&gt; region      y1995      y2005      y2015       y2025       y2035
#&gt;    GLO 4933102222 6995727898 8904158681 11295605448 14217834702
#&gt;       year
#&gt; region       y2045
#&gt;    GLO 17754013380
#&gt; 
#&gt; , , newscen = NEWSCEN2
#&gt; 
#&gt;       year
#&gt; region      y1995      y2005      y2015       y2025       y2035
#&gt;    GLO 4933102222 7051760063 8890339872 10682447215 12135596744
#&gt;       year
#&gt; region       y2045
#&gt;    GLO 13125387105
</code></pre>

<p>apply a lowpass filter on the data</p>

<pre><code class="r">lowpass(d)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario.newscen = A2.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  215257259  393052278  801062132 1572159964 2862633877 4130065444
#&gt;   CPA 2326428169 2885115796 3517360387 4027918676 4418769290 4643174528
#&gt;   EUR  180986488  197707946  213708408  225625472  235301732  240470886
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  218391490  407906787  819523019 1517674392 2550238260 3495318630
#&gt;   CPA 2326289061 2873961548 3456542090 3856310784 4067500804 4120538496
#&gt;   EUR  181406175  199434821  216716639  228611782  236878095  240400727
#&gt; 
#&gt; , , scenario.newscen = A2.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  221585048  423173971  838660156 1469218793 2282324829 2965540774
#&gt;   CPA 2326151137 2863027975 3397932386 3695192469 3750635992 3662152692
#&gt;   EUR  181820814  201148478  219709244  231580954  238443396  240337117
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i          y1995      y2005      y2015      y2025      y2035      y2045
#&gt;   RRR  224950152  439332121  859054538 1425542859 2048193812 2515880856
#&gt;   CPA 2326012081 2852139305 3340558747 3541521785 3460099785 3253750435
#&gt;   EUR  182247450  202918704  222806683  234650901  240059138  240277641
</code></pre>

<p>do a linear interpolation of the data over time (yearly)</p>

<pre><code class="r">time_interpolate(d,2005:2030)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , NA = A2.NEWSCEN1
#&gt; 
#&gt;      NA
#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010
#&gt;   RRR  343613717  380503336  417392955  454282573  491172192  528061811
#&gt;   CPA 2945847491 3004144056 3062440621 3120737186 3179033751 3237330316
#&gt;   EUR  201573119  202771934  203970749  205169563  206368378  207567193
#&gt;      NA
#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016
#&gt;   RRR  564951429  601841048  638730667  675620285  712509904  784820414
#&gt;   CPA 3295626881 3353923446 3412220011 3470516576 3528813140 3582528604
#&gt;   EUR  208766008  209964822  211163637  212362452  213561266  214818938
#&gt;      NA
#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022
#&gt;   RRR  857130924  929441434 1001751943 1074062453 1146372963 1218683473
#&gt;   CPA 3636244068 3689959532 3743674995 3797390459 3851105923 3904821386
#&gt;   EUR  216076609  217334281  218591952  219849624  221107295  222364966
#&gt;      NA
#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028
#&gt;   RRR 1290993983 1363304493 1435615002 1562543497 1689471992 1816400486
#&gt;   CPA 3958536850 4012252314 4065967778 4104463601 4142959424 4181455247
#&gt;   EUR  223622638  224880309  226137981  227190648  228243316  229295984
#&gt;      NA
#&gt; fake       y2029      y2030
#&gt;   RRR 1943328981 2070257476
#&gt;   CPA 4219951070 4258446893
#&gt;   EUR  230348652  231401320
#&gt; 
#&gt; , , NA = B1.NEWSCEN1
#&gt; 
#&gt;      NA
#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010
#&gt;   RRR  356150641  395220986  434291331  473361676  512432021  551502366
#&gt;   CPA 2945291059 2999292855 3053294650 3107296445 3161298240 3215300035
#&gt;   EUR  203251869  204637809  206023749  207409689  208795629  210181568
#&gt;      NA
#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016
#&gt;   RRR  590572711  629643056  668713401  707783746  746854091  814992008
#&gt;   CPA 3269301830 3323303626 3377305421 3431307216 3485309011 3527804038
#&gt;   EUR  211567508  212953448  214339388  215725328  217111267  218339356
#&gt;      NA
#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022
#&gt;   RRR  883129924  951267840 1019405756 1087543673 1155681589 1223819505
#&gt;   CPA 3570299065 3612794092 3655289119 3697784146 3740279173 3782774199
#&gt;   EUR  219567445  220795533  222023622  223251710  224479799  225707887
#&gt;      NA
#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028
#&gt;   RRR 1291957422 1360095338 1428233254 1532147626 1636061997 1739976368
#&gt;   CPA 3825269226 3867764253 3910259280 3931174909 3952090537 3973006165
#&gt;   EUR  226935976  228164064  229392153  230308093  231224033  232139974
#&gt;      NA
#&gt; fake       y2029      y2030
#&gt;   RRR 1843890739 1947805111
#&gt;   CPA 3993921794 4014837422
#&gt;   EUR  233055914  233971854
#&gt; 
#&gt; , , NA = A2.NEWSCEN2
#&gt; 
#&gt;      NA
#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010
#&gt;   RRR  368924875  410269823  451614772  492959720  534304669  575649617
#&gt;   CPA 2944739364 2994533238 3044327113 3094120988 3143914863 3193708738
#&gt;   EUR  204910425  206484261  208058097  209631933  211205769  212779605
#&gt;      NA
#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016
#&gt;   RRR  616994566  658339514  699684463  741029411  782374360  846233627
#&gt;   CPA 3243502613 3293296488 3343090363 3392884238 3442678113 3474573697
#&gt;   EUR  214353441  215927278  217501114  219074950  220648786  221846805
#&gt;      NA
#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022
#&gt;   RRR  910092894  973952161 1037811428 1101670695 1165529962 1229389229
#&gt;   CPA 3506469281 3538364865 3570260450 3602156034 3634051618 3665947202
#&gt;   EUR  223044825  224242844  225440864  226638883  227836903  229034922
#&gt;      NA
#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028
#&gt;   RRR 1293248496 1357107763 1420967030 1504127002 1587286974 1670446946
#&gt;   CPA 3697842786 3729738370 3761633954 3766952945 3772271935 3777590925
#&gt;   EUR  230232942  231430961  232628981  233407789  234186598  234965407
#&gt;      NA
#&gt; fake       y2029      y2030
#&gt;   RRR 1753606919 1836766891
#&gt;   CPA 3782909915 3788228905
#&gt;   EUR  235744216  236523025
#&gt; 
#&gt; , , NA = B1.NEWSCEN2
#&gt; 
#&gt;      NA
#&gt; fake       y2005      y2006      y2007      y2008      y2009      y2010
#&gt;   RRR  382385289  426155374  469925458  513695542  557465627  601235711
#&gt;   CPA 2944183141 2989788415 3035393688 3080998962 3126604236 3172209510
#&gt;   EUR  206616969  208386932  210156896  211926859  213696822  215466785
#&gt;      NA
#&gt; fake       y2011      y2012      y2013      y2014      y2015      y2016
#&gt;   RRR  645005795  688775879  732545964  776316048  820086132  879443579
#&gt;   CPA 3217814784 3263420057 3309025331 3354630605 3400235879 3421970300
#&gt;   EUR  217236749  219006712  220776675  222546639  224316602  225482598
#&gt;      NA
#&gt; fake       y2017      y2018      y2019      y2020      y2021      y2022
#&gt;   RRR  938801026  998158473 1057515919 1116873366 1176230813 1235588260
#&gt;   CPA 3443704721 3465439142 3487173563 3508907984 3530642406 3552376827
#&gt;   EUR  226648593  227814589  228980585  230146581  231312577  232478572
#&gt;      NA
#&gt; fake       y2023      y2024      y2025      y2026      y2027      y2028
#&gt;   RRR 1294945706 1354303153 1413660600 1477770950 1541881301 1605991651
#&gt;   CPA 3574111248 3595845669 3617580090 3608891189 3600202289 3591513388
#&gt;   EUR  233644568  234810564  235976560  236612292  237248024  237883756
#&gt;      NA
#&gt; fake       y2029      y2030
#&gt;   RRR 1670102001 1734212352
#&gt;   CPA 3582824487 3574135586
#&gt;   EUR  238519489  239155221
</code></pre>

<p>split the data, do some calculations and bind it back together</p>

<pre><code class="r">d1 &lt;- d[,1:3,]*100
d2 &lt;- d[,4:6,]*(-1)
dd &lt;- mbind(d1,d2)
dd
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario.newscen = A2.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015       y2025       y2035
#&gt;   RRR  17247177286  34361371712  71250990410 -1435615002 -2704899949
#&gt;   CPA 211995506103 294584749142 352881314048 -4065967778 -4450926008
#&gt;   EUR  17412427723  20157311917  21356126643  -226137981  -236664659
#&gt;      year
#&gt; i           y2045
#&gt;   RRR -4605120609
#&gt;   CPA -4707257368
#&gt;   EUR  -241739628
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015       y2025       y2035
#&gt;   RRR  17247177286  35615064104  74685409122 -1428233254 -2467376967
#&gt;   CPA 211995506103 294529105935 348530901109 -3910259280 -4119415564
#&gt;   EUR  17412427723  20325186949  21711126748  -229392153  -238551555
#&gt;      year
#&gt; i           y2045
#&gt;   RRR -3837965851
#&gt;   CPA -4120912807
#&gt;   EUR  -241017118
#&gt; 
#&gt; , , scenario.newscen = A2.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015       y2025       y2035
#&gt;   RRR  17247177286  36892487484  78237435983 -1420967030 -2252566752
#&gt;   CPA 211995506103 294473936352 344267811303 -3761633954 -3814823856
#&gt;   EUR  17412427723  20491042497  22064878583  -232628981  -240417069
#&gt;      year
#&gt; i           y2045
#&gt;   RRR -3203198781
#&gt;   CPA -3611262304
#&gt;   EUR  -240310466
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i            y1995        y2005        y2015       y2025       y2035
#&gt;   RRR  17247177286  38238528941  82008613234 -1413660600 -2054764104
#&gt;   CPA 211995506103 294418314075 340023587875 -3617580090 -3530691083
#&gt;   EUR  17412427723  20661696919  22431660178  -235976560  -242333882
#&gt;      year
#&gt; i           y2045
#&gt;   RRR -2669586440
#&gt;   CPA -3161436886
#&gt;   EUR  -239592227
</code></pre>

<p>set all values greater than 0.5 to 0.51</p>

<pre><code class="r">d[d &gt; 0.5] &lt;- 0.51
d
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario.newscen = A2.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt; 
#&gt; , , scenario.newscen = A2.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   CPA  0.51  0.51  0.51  0.51  0.51  0.51
#&gt;   EUR  0.51  0.51  0.51  0.51  0.51  0.51
</code></pre>

<p>round the data</p>

<pre><code class="r">round(d,0)
#&gt; An object of class &quot;magpie&quot;
#&gt; , , scenario.newscen = A2.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR     1     1     1     1     1     1
#&gt;   CPA     1     1     1     1     1     1
#&gt;   EUR     1     1     1     1     1     1
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN1
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR     1     1     1     1     1     1
#&gt;   CPA     1     1     1     1     1     1
#&gt;   EUR     1     1     1     1     1     1
#&gt; 
#&gt; , , scenario.newscen = A2.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR     1     1     1     1     1     1
#&gt;   CPA     1     1     1     1     1     1
#&gt;   EUR     1     1     1     1     1     1
#&gt; 
#&gt; , , scenario.newscen = B1.NEWSCEN2
#&gt; 
#&gt;      year
#&gt; i     y1995 y2005 y2015 y2025 y2035 y2045
#&gt;   RRR     1     1     1     1     1     1
#&gt;   CPA     1     1     1     1     1     1
#&gt;   EUR     1     1     1     1     1     1
</code></pre>

</body>

</html>
